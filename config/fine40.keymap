/*
 * Mochi40 (Fine40) Keymap - Optimized for ZMK Studio & Left-Space Layer
 */

#include <behaviors.dtsi>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/ext_power.h>
#include <dt-bindings/zmk/keys.h>

/ {
    keymap {
        compatible = "zmk,keymap";

        // Layer 0: Gõ văn bản bình thường
        default_layer {
            bindings = <
&kp ESC      &kp Q     &kp W      &kp E     &kp R      &kp T      &kp Y        &kp U     &kp I      &kp O     &kp P      &kp BSPC
&kp TAB      &kp A     &kp S      &kp D     &kp F      &kp G      &kp H        &kp J     &kp K      &kp L     &kp SEMI   &kp RET
&kp LSHFT    &kp Z     &kp X      &kp C     &kp V      &kp B      &kp N        &kp M     &kp COMMA  &kp DOT   &kp UP     &kp FSLH
&mo 3        &mo 2     &kp K_APP  &kp LGUI  &lt 1 SPACE &none     &kp SPACE    &none     &kp LALT   &kp LEFT  &kp DOWN   &kp RIGHT
            >;

            sensor-bindings = <&inc_dec_kp C_VOL_UP C_VOL_DN>;
        };

        // Layer 1: Số và Ký tự (Giữ phím Space trái để kích hoạt)
        symbols_layer {
            bindings = <
&kp GRAVE    &kp N1    &kp N2     &kp N3    &kp N4     &kp N5     &kp N6       &kp N7    &kp N8     &kp N9    &kp N0     &kp DEL
&trans       &trans    &trans     &trans    &trans     &trans     &kp MINUS    &kp EQUAL &kp LBKT   &kp RBKT  &kp BSLH   &trans
&trans       &trans    &trans     &trans    &trans     &trans     &kp UNDER    &kp PLUS  &kp LBRC   &kp RBRC  &kp PG_UP  &trans
&trans       &trans    &trans     &trans    &trans     &none      &trans       &none     &trans     &kp HOME  &kp PG_DN  &kp END
            >;
        };

        // Layer 2: Các phím chức năng F1-F12
        function_layer {
            bindings = <
&kp F1       &kp F2    &kp F3     &kp F4    &kp F5     &kp F6     &kp F7       &kp F8    &kp F9     &kp F10   &kp F11    &kp F12
&trans       &trans    &trans     &trans    &trans     &trans     &trans       &trans    &trans     &trans    &trans     &trans
&trans       &trans    &trans     &trans    &trans     &trans     &trans       &trans    &trans     &trans    &trans     &trans
&trans       &trans    &trans     &trans    &trans     &none      &trans       &none     &trans     &trans    &trans     &trans
            >;
        };

        // Layer 3: Hệ thống (Bluetooth, Reset và Unlock Studio)
        control_layer {
            bindings = <
&sys_reset      &bootloader  &bt BT_CLR   &bt BT_PRV   &bt BT_NXT   &trans    &trans  &trans  &trans  &trans  &trans  &ext_power EP_TOG
&studio_unlock  &trans       &bt BT_SEL 0 &bt BT_SEL 1 &bt BT_SEL 2 &trans    &trans  &trans  &trans  &trans  &trans  &trans
&trans          &trans       &trans       &trans       &trans       &trans    &trans  &trans  &trans  &trans  &trans  &trans
&trans          &trans       &trans       &trans       &trans       &none     &trans  &none   &trans  &trans  &trans  &trans
            >;
        };
    };
};
